<ion-header>
  <ion-toolbar color="humanist">
    <ion-title role="heading" aria-level="1">
      <span class="title">Experiències guiades de Silo</span>
    </ion-title>
    <ion-button color="light" slot="end" size="small" (click)="setCreditsOpen(true)">Crèdits</ion-button>
    <ion-modal [isOpen]="isCreditsModalOpen">
      <ng-template>
        <ion-header>
          <ion-toolbar>
            Crèdits
            <ion-buttons slot="end">
              <ion-button (click)="setCreditsOpen(false)">Tancar</ion-button>
            </ion-buttons>
          </ion-toolbar>
        </ion-header>
        <ion-content class="ion-padding">
          <p>
            Produït, musicat, gravat, mesclat i masteritzat a BITSTUDI de Barcelona per Xavier Batllés
          </p>
          <p>
            Visita'ns a la web de la Saleta de Sants:
            <a href="https://www.lasaletadesants.info" target="_blank" title="lasaletadesants.info">lasaletadesants.info</a>
          </p>
        </ion-content>
      </ng-template>
    </ion-modal>
  </ion-toolbar>
</ion-header>

<ion-content padding>
  <ion-accordion-group *ngIf="files.length">
    <ion-accordion *ngFor="let file of files; let i = index">
      <ion-item slot="header" [color]="getColorSelected(i)" text-wrap (click)="openFile(file, i)">
        <ion-label>{{ file.name }} ({{file.duration}})</ion-label>
      </ion-item>
      <div class="ion-padding" slot="content">{{ file.description }}</div>
    </ion-accordion>
  </ion-accordion-group>
</ion-content>

<ion-footer *ngIf="currentFile?.file">
  <ion-toolbar color="humanist">
    <ion-range color="dark" min=0 max=100 [(ngModel)]="seekbar" [pin]="true" [pinFormatter]="updatePin"
    (ionKnobMoveStart)="onSeekStart()" (ionKnobMoveEnd)="onSeekEnd($event)">
      <ion-icon color="dark" slot="start" name="play-skip-back" aria-label="Anterior" (click)="previous()"></ion-icon>
      <ion-icon color="dark" slot="end" name="play-skip-forward" aria-label="Següent" (click)="next()"></ion-icon>
    </ion-range>
  </ion-toolbar>
  <ion-toolbar color="humanist">
    <ion-title>
      <span class="title">{{currentFile?.file?.name}}</span>
    </ion-title>
    <ion-buttons slot="primary" *ngIf="isPaused">
      <ion-button fill="solid" color="light" aria-label="Reproduir" (click)="play()">
        <ion-icon slot="icon-only" name="play" aria-hidden="true"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-buttons slot="primary" *ngIf="!isPaused">
      <ion-button fill="solid" color="light" aria-label="Pausar" (click)="pause()">
        <ion-icon slot="icon-only" name="pause" aria-hidden="true"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-buttons slot="primary">
      <ion-button fill="solid" color="light" aria-label="Parar" (click)="stop()">
        <ion-icon slot="icon-only" name="stop" aria-hidden="true"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-footer>
